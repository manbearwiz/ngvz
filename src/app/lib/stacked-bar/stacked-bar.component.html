<svg width="960" height="500" *ngIf="stack">
  <g transform="translate(40,20)">
    <g *ngFor="let s of stack">
      <g *ngFor="let t of s" fill="#98abc5">
        <rect [attr.x]="x(t.data.State)" [attr.y]="y(t[1])" [attr.height]="y(t[0]) - y(t[1])" [attr.width]="x.bandwidth()" [ngvzFillOrdinal]="s.key"
          [colors]="colors"></rect>
      </g>
    </g>
    <g class="axis" transform="translate(0,450)" fill="none" text-anchor="middle">
      <path class="domain" stroke="#000" d="M0.5,6V0.5H900.5V6"></path>
      <g *ngFor="let d of stack[0]" class="tick" opacity="1" ngvzTransform [translateX]="x(d.data.State) + x.bandwidth() / 2 + .5">
        <line stroke="#000" y2="6"></line>
        <text fill="#000" y="9" dy="0.71em">{{d.data.State}}</text>
      </g>
    </g>
    <g class="axis" fill="none" text-anchor="end">
      <path class="domain" stroke="#000" d="M-6,450.5H0.5V0.5H-6"></path>
      <g class="tick" opacity="1" *ngFor="let yTick of y.ticks().reverse()" ngvzTransform [translateY]="y(yTick) + .5">
        <line stroke="#000" x2="-6"></line>
        <text fill="#000" x="-9" dy="0.32em">{{yTick / 1000000}}M</text>
      </g>
      <text x="2" y="0.5" dy="0.32em" fill="#000" font-weight="bold" text-anchor="start">Population</text>
    </g>
    <g text-anchor="end">
      <g *ngFor="let s of stack; index as i;" ngvzTransform [translateY]="i * 20">
        <rect x="881" width="19" height="19" [ngvzFillOrdinal]="s.key" [colors]="colors.slice().reverse()"></rect>
        <text x="876" y="9.5" dy="0.32em">{{s.key}}</text>
      </g>
    </g>
  </g>
</svg>
